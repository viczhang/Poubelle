version: '3'

services:
  poubelle:
    build: .
    container_name: poubelle
    restart: always
    ports:
      - "5000:5000"
    volumes:
      - ./static/uploads:/app/static/uploads
      - ./imageshare.db:/app/imageshare.db
    environment:
      FLASK_ENV: production
      # Set admin password via environment; defaults to 'admin' if not provided
      ADMIN_PASSWORD: ${ADMIN_PASSWORD:-admin}
    command: python run.py
    networks:
      - caddy_default

networks:
  caddy_default:
    external: true
